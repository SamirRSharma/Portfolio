"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[781],{17781:function(e,s,a){a.r(s);var t=a(85893),n=a(67294),r=a(67814),c=a(59417),i=a(31955),d=a(25675),o=a.n(d);s.default=()=>{let[e,s]=(0,n.useState)(!1),[a,d]=(0,n.useState)(""),[l,h]=(0,n.useState)([]),[m,g]=(0,n.useState)("");(0,n.useEffect)(()=>{h([{text:"Hi there! I am your Chat Assistant.",sender:"bot",senderName:"Chat Assistant",senderImage:"/img/logo.jpg"}]);let e=i.Z.get("userId");if(e){g(e);let s=i.Z.get("chatMessages_".concat(e));s&&h(JSON.parse(s))}else{let e=N();g(e),i.Z.set("userId",e),i.Z.remove("chatMessages")}},[]),(0,n.useEffect)(()=>{i.Z.set("chatMessages_".concat(m),JSON.stringify(l))},[l,m]);let u=(e,s)=>fetch("http://localhost:8000/api/chat/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,userId:s})}).then(e=>{if(!e.ok)throw Error("Server error");return e.json()}).then(e=>e.response),N=()=>{let e=new Date().getTime();return"user_".concat(e,"_").concat(Math.floor(1e3*Math.random()))};return(0,t.jsxs)("div",{className:"chatbot",children:[e&&(0,t.jsxs)("div",{className:"chatbot-container",children:[(0,t.jsx)("div",{className:"chat-header",children:(0,t.jsx)("h3",{children:"Chat Assistant"})}),(0,t.jsx)("div",{className:"chat-body",children:l.map((e,s)=>(0,t.jsxs)("div",{className:"message ".concat("bot"===e.sender?"bot":"user"),children:["bot"===e.sender&&(0,t.jsxs)("div",{className:"sender-info",children:[(0,t.jsx)(o(),{className:"sender-image",height:16,width:16,src:e.senderImage,alt:"bot image",loading:"eager"}),(0,t.jsx)("span",{className:"sender-name",children:e.senderName})]}),"user"===e.sender&&(0,t.jsxs)("div",{className:"sender-info user-sender",children:[(0,t.jsx)(o(),{className:"sender-image",height:16,width:16,src:e.senderImage,alt:"Sender image",loading:"eager"}),(0,t.jsx)("span",{className:"sender-name",children:e.senderName})]}),(0,t.jsx)("div",{className:"message-content",children:e.text})]},s))}),(0,t.jsxs)("div",{className:"chat-footer",children:[(0,t.jsx)("input",{type:"text",placeholder:"Type your message...",value:a,onChange:e=>{d(e.target.value)}}),(0,t.jsx)(r.G,{icon:c.XCy,className:"send-icon",onClick:()=>{""!==a.trim()&&(h([...l,{text:a,sender:"user",senderName:"User",senderImage:"/img/user.jpg"}]),d(""),u(a,m).then(e=>{let s={text:e,sender:"bot",senderName:"Chat Assistant",senderImage:"/img/logo.jpg"};h(e=>[...e,s])}).catch(()=>{let e={text:"Hey ".concat(m,"\n An error occurred. Please try again later."),sender:"bot",senderName:"Chat Assistant",senderImage:"/img/logo.jpg"};h(s=>[...s,e])}))}})]})]}),(0,t.jsx)("div",{className:"chatbot-button ".concat(e?"active":""),onClick:()=>{s(!e)},children:e?(0,t.jsx)(r.G,{icon:c.NBC,className:"close-icon"}):(0,t.jsx)(r.G,{icon:c.Egd})})]})}}}]);